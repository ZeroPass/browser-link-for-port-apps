<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  
  <title>Browser link for Port apps</title>
  <link href="css/browser-link-for-port-apps.css" rel="stylesheet" type="text/css">
  <script src="js/browser-link-for-port-apps.js"></script>
</head>

<body>
  <div class="port">
    <section id="zeropass-port-qr"></section>
  </div>
  <script>
    var androidData = {"apn":"io.zeropass.port",
                        "afl":"https://play.google.com/store/apps/details?id=io.zeropass.port",
                        "version":'0.1'};

    var iosData = {"ibi":"io.zeropass.port",
                    "isi":"1596748294",
                    "imv":10}

    var shortLinkURL = "https://portapp.page.link";
    var deepLinkURL = "https://portapp.page.link/homeMagnetLink";

    var linkOtherPlatforms = 'https://port.link/';

    var callbackFunction = function buttonXpressed() {
      alert("Button X was pressed.");
  }

  const queryString = window.location.search;
  const urlParams = new URLSearchParams(queryString);

  let urlSearchParam = urlParams.get('url');
  if (urlSearchParam == null)
    urlSearchParam = prompt("Please enter Port(ZeroPass) server address", "https://");

  let userIDSearchParam = urlParams.get('userID');
  if (userIDSearchParam == null)
    userIDSearchParam = prompt("Please user identifier(User ID)", "");
 
    ZeroPassPortWidget.render(shortLinkURL,
                  deepLinkURL,
                  androidData,
                  iosData,
                  linkOtherPlatforms,
                  callbackFunction,
                  {
                    userID: userIDSearchParam, 
                    requestType: "attestation_request",
                    url: urlSearchParam,
                    version: 0.1
                  },
                  document.querySelector('#zeropass-port-qr'));
  </script>
</body>
</html>
